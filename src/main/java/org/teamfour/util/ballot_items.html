<!DOCTYPE html>
<html lang="en">
<head>
    <title>Ballot Items</title>
</head>
<body>
<div id="ballot-items" style="font-family:courier, monospace;"></div>

<script>const ballotItems = [
    {
        type: 'contest',
        name: 'Mayor',
        description: 'Vote for the Mayor of the City',
        allowedSelections: 1,
        candidates: [
            { name: 'John Smith', party: 'Independent' },
            { name: 'Jane Doe', party: 'Democratic' },
            { name: 'Bob Johnson', party: 'Republican' }
        ]
    },
    {
        type: 'proposition',
        name: 'Proposition A',
        description: 'Should the city invest in a new public transportation system?',
        allowedSelections: 1,
        options: ['Yes', 'No']
    }
];

const votes = {
    'Mayor': [
        { candidate: 'John Smith', votes: 100 },
        { candidate: 'Jane Doe', votes: 200 },
        { candidate: 'Bob Johnson', votes: 150 }
    ],
    'Proposition A': [
        { option: 'Yes', votes: 300 },
        { option: 'No', votes: 100 }
    ]
};

    const renderBallotItems = () => {
        const ballotItemsPre = document.getElementById('ballot-items');

        // Iterate through the ballot items
        const ballotItemsYaml = [];
        ballotItems.forEach(ballotItem => {
            const ballotItemYaml = [];
            ballotItemYaml.push(`${ballotItem.name}:`);
            ballotItemYaml.push(`&nbsp;&nbsp;type: ${ballotItem.type}`);
            ballotItemYaml.push(`&nbsp;&nbsp;description: ${ballotItem.description}`);
            ballotItemYaml.push(`&nbsp;&nbsp;allowedSelections: ${ballotItem.allowedSelections}`);
            if (ballotItem.type === 'contest') {
                const candidatesYaml = [];
                ballotItem.candidates.forEach(candidate => {
                    const votesCount = votes[ballotItem.name].find(v => v.candidate === candidate.name)?.votes || 0;
                    candidatesYaml.push(`&nbsp;&nbsp;&nbsp;&nbsp;- name: ${candidate.name}`);
                    candidatesYaml.push(`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;party: ${candidate.party}`);
                    candidatesYaml.push(`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;votes: ${votesCount}`);
                });
                ballotItemYaml.push(`&nbsp;&nbsp;candidates:<br> ${candidatesYaml.join('<br>')}`);
            } else if (ballotItem.type === 'proposition') {
                const optionsYaml = [];
                ballotItem.options.forEach(option => {
                    const votesCount = votes[ballotItem.name].find(v => v.option === option)?.votes || 0;
                    optionsYaml.push(`&nbsp;&nbsp;&nbsp;&nbsp;- option: ${option}`);
                    optionsYaml.push(`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;votes: ${votesCount}`);
                });
                ballotItemYaml.push(`&nbsp;&nbsp;options:<br> ${optionsYaml.join('<br>')}`);
            }
            ballotItemsYaml.push(ballotItemYaml.join('<br>'));
        });

        ballotItemsPre.innerHTML = ballotItemsYaml.join('<br><br>');
    };

    renderBallotItems();


</script>
</body>
</html>
